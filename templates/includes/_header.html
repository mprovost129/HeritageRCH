{% load static %}
{% with request.resolver_match.view_name as view_name %}
<header class="border-bottom">
  <nav class="navbar navbar-expand-lg bg-heritage">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="{% url 'pages:home' %}">
        <img src="{% static 'img/heritage-logo.svg' %}" alt="Heritage Realty & Custom Homes Logo"
             style="height: 50px; width: auto;">
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
              aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link text-white{% if view_name == 'catalog:community_list' or view_name == 'catalog:community_detail' %} active{% endif %}"
               href="{% url 'catalog:community_list' %}">
              Communities
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white{% if view_name == 'catalog:plan_list' or view_name == 'catalog:plan_detail' %} active{% endif %}"
               href="{% url 'catalog:plan_list' %}">
              Floor Plans
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white{% if view_name == 'catalog:home_list' or view_name == 'catalog:home_detail' %} active{% endif %}"
               href="{% url 'catalog:home_list' %}">
              Available Homes
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white{% if view_name == 'pages:custom_homes' %} active{% endif %}"
               href="{% url 'pages:custom_homes' %}">
              Custom Homes
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white{% if view_name == 'pages:about' %} active{% endif %}"
               href="{% url 'pages:about' %}">
              About
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white{% if view_name == 'pages:contact' %} active{% endif %}"
               href="{% url 'pages:contact' %}">
              Contact
            </a>
          </li>

          {# Optional: phone in the header, if set #}
          {% if site_settings and site_settings.primary_phone %}
            <li class="nav-item ms-lg-3">
              {% if site_settings.primary_phone_link %}
                <a class="nav-link text-white" href="tel:{{ site_settings.primary_phone_link }}">
                  {{ site_settings.primary_phone }}
                </a>
              {% else %}
                <span class="nav-link text-white">
                  {{ site_settings.primary_phone }}
                </span>
              {% endif %}
            </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>
</header>
{% endwith %}
