{% load static %}

<header class="border-bottom">
  <nav class="navbar navbar-expand-lg navbar-dark bg-heritage">
    <div class="container-fluid px-3 px-md-4">
      <!-- Top bar for social and accessibility links -->
      <div class="d-flex justify-content-end align-items-center py-1 small" style="min-height: 32px;">
        <span class="me-2 d-inline-block" style="width: 24px; text-align: center;">
          {% if site_settings.facebook_url %}
            <a href="{{ site_settings.facebook_url }}" target="_blank" rel="noopener" aria-label="Facebook"><img src="{% static 'img/icon-facebook.svg' %}" alt="Facebook" style="height: 18px;"></a>
          {% endif %}
        </span>
        <span class="me-2 d-inline-block" style="width: 24px; text-align: center;">
          {% if site_settings.instagram_url %}
            <a href="{{ site_settings.instagram_url }}" target="_blank" rel="noopener" aria-label="Instagram"><img src="{% static 'img/icon-instagram.svg' %}" alt="Instagram" style="height: 18px;"></a>
          {% endif %}
        </span>
        <span class="me-2 d-inline-block" style="width: 24px; text-align: center;">
          {% if site_settings.twitter_url %}
            <a href="{{ site_settings.twitter_url }}" target="_blank" rel="noopener" aria-label="Twitter"><img src="{% static 'img/icon-twitter.svg' %}" alt="Twitter" style="height: 18px;"></a>
          {% endif %}
        </span>
        <span class="me-2 d-inline-block" style="width: 24px; text-align: center;">
          {% if site_settings.linkedin_url %}
            <a href="{{ site_settings.linkedin_url }}" target="_blank" rel="noopener" aria-label="LinkedIn"><img src="{% static 'img/icon-linkedin.svg' %}" alt="LinkedIn" style="height: 18px;"></a>
          {% endif %}
        </span>
        <span class="me-2 d-inline-block" style="width: 24px; text-align: center;">
          {% if site_settings.tiktok_url %}
            <a href="{{ site_settings.tiktok_url }}" target="_blank" rel="noopener" aria-label="TikTok"><img src="{% static 'img/icon-tiktok.svg' %}" alt="TikTok" style="height: 18px;"></a>
          {% endif %}
        </span>
        <a href="/privacy-policy/" class="ms-2">Privacy</a>
        <a href="/terms/" class="ms-2">Terms</a>
        <a href="/accessibility/" class="ms-2">Accessibility</a>
      </div>


      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#mainNav" aria-controls="mainNav"
              aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="mainNav">
        <!-- Left: Nav links + dropdowns -->
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">

          <!-- FIND YOUR HOME (no plans) -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="findHomeDropdown"
               role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Find Your Home
            </a>
            <ul class="dropdown-menu" aria-labelledby="findHomeDropdown">
              <li><a class="dropdown-item" href="/communities/">Communities</a></li>
              <li><a class="dropdown-item" href="/model-homes/">Model Homes</a></li>
            </ul>
          </li>

          <!-- OUR PARTNERS -->
          <li class="nav-item">
            <a class="nav-link" href="/our-partners/">Our Partners</a>
          </li>

          <!-- ABOUT US -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="aboutDropdown"
               role="button" data-bs-toggle="dropdown" aria-expanded="false">
              About Us
            </a>
            <ul class="dropdown-menu" aria-labelledby="aboutDropdown">
              <li><a class="dropdown-item" href="/about/">Our Story</a></li>
              <li><a class="dropdown-item" href="/team/">Meet Our Team</a></li>
            </ul>
          </li>

          <!-- LAND ACQUISITION -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="landDropdown"
               role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Land Acquisition
            </a>
            <ul class="dropdown-menu" aria-labelledby="landDropdown">
              <li><a class="dropdown-item" href="/we-buy-land/">We Buy Land</a></li>
            </ul>
          </li>

          <!-- GALLERY -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="galleryDropdown"
               role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Gallery
            </a>
            <ul class="dropdown-menu" aria-labelledby="galleryDropdown">
              <li><a class="dropdown-item" href="/gallery/">Active Projects</a></li>
              <li><a class="dropdown-item" href="/completed-projects/">Completed Projects</a></li>
            </ul>
          </li>

          <!-- CONTACT (simple link) -->
          <li class="nav-item">
            <a class="nav-link" href="/contact/">Contact Us</a>
          </li>

          <!-- Mobile-only Call CTA inside menu -->
          {% if site_settings and site_settings.primary_phone %}
          <li class="nav-item d-lg-none mt-2">
            <a class="btn btn-outline-light w-100"
               href="tel:{{ site_settings.primary_phone_link|default:site_settings.primary_phone }}">
              {{ site_settings.cta_phone_label|default:"Ask a Pro" }}:
              {{ site_settings.primary_phone }}
            </a>
          </li>
          {% endif %}
        </ul>

        <!-- Desktop Call CTA on the far right -->
        {% if site_settings and site_settings.primary_phone %}
        <div class="d-none d-lg-flex ms-4">
          <a class="btn btn-cta-phone d-flex flex-column justify-content-center text-start"
             href="tel:{{ site_settings.primary_phone_link|default:site_settings.primary_phone }}">
            <span class="small text-uppercase fw-semibold">
              {{ site_settings.cta_phone_label|default:"Ask a Pro" }}
            </span>
            <span class="fw-bold">
              {{ site_settings.primary_phone }}
            </span>
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </nav>
</header>
