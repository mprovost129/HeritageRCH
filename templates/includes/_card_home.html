{# expects: obj = AvailableHome #}
<div class="card h-100 shadow-sm">
  <div class="ratio ratio-4x3">
    {% with photo=obj.photos.all.0 %}
      {% if photo %}
        <img src="{{ photo.image.url }}" alt="{{ photo.caption }}" class="img-fluid"
             style="object-fit: cover; width: 100%; height: 100%;">
      {% else %}
        <div class="d-flex align-items-center justify-content-center bg-light text-muted small">
          Home photos coming soon
        </div>
      {% endif %}
    {% endwith %}
  </div>

  <div class="card-body d-flex flex-column">
    <div class="d-flex justify-content-between align-items-start mb-1">
      <h3 class="h6 card-title mb-0">
        {{ obj.full_address|default:obj.slug }}
      </h3>
      {% if obj.status %}
        <span class="badge badge-heritage ms-2">
          {{ obj.get_status_display }}
        </span>
      {% endif %}
    </div>

    {% if obj.price %}
      <p class="fw-semibold mb-1">
        ${{ obj.price|floatformat:0 }}
      </p>
    {% endif %}

    <p class="text-muted mb-2">
      {{ obj.beds }} bd · {{ obj.baths }} ba
      {% if obj.sq_ft %}
        · {{ obj.sq_ft }} sq ft
      {% endif %}
    </p>

    <p class="small text-muted mb-3">
      {{ obj.community.name }}
    </p>

    <div class="mt-auto">
      <a href="{{ obj.get_absolute_url }}" class="btn btn-outline-primary btn-sm w-100">
        View Home
      </a>
    </div>
  </div>
</div>
