{# expects: obj = FloorPlan #}
<div class="card h-100 shadow-sm">
  <div class="ratio ratio-4x3">
    {% with photo=obj.photos.all.0 %}
      {% if photo %}
        <img src="{{ photo.image.url }}" alt="{{ photo.caption }}" class="img-fluid"
             style="object-fit: cover; width: 100%; height: 100%;">
      {% else %}
        <div class="d-flex align-items-center justify-content-center bg-light text-muted small">
          Floor plan image coming soon
        </div>
      {% endif %}
    {% endwith %}
  </div>

  <div class="card-body d-flex flex-column">
    <h3 class="h5 card-title mb-1">{{ obj.name }}</h3>
    <p class="text-muted mb-2">
      {{ obj.beds }} bd · {{ obj.baths }} ba
      {% if obj.sq_ft_min or obj.sq_ft_max %}
        ·
        {% if obj.sq_ft_min and obj.sq_ft_max %}
          {{ obj.sq_ft_min }}–{{ obj.sq_ft_max }} sq ft
        {% elif obj.sq_ft_min %}
          {{ obj.sq_ft_min }}+ sq ft
        {% elif obj.sq_ft_max %}
          Up to {{ obj.sq_ft_max }} sq ft
        {% endif %}
      {% endif %}
    </p>
    {% if obj.description %}
      <p class="small mb-3">
        {{ obj.description|truncatewords:20 }}
      </p>
    {% endif %}
    <p class="small text-muted mb-3">
      Available in {{ obj.available_in.count }} community{% if obj.available_in.count != 1 %}ies{% endif %}
    </p>
    <div class="mt-auto">
      <a href="{{ obj.get_absolute_url }}" class="btn btn-outline-primary btn-sm w-100">
        View Plan
      </a>
    </div>
  </div>
</div>
